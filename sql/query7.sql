-- パターン7：トランザクション内で家族と番号を同時変更（OK）

BEGIN;

INSERT INTO customer (id, name, phone_number) VALUES
  ('00000000-0000-0000-0000-000000000019', 'Ian',  '000-3333-3333'),
  ('00000000-0000-0000-0000-000000000020', 'Jack', '000-3333-3333');

INSERT INTO family (id) VALUES ('00000000-0000-0000-0000-000000000004');

INSERT INTO family_member (family_id, customer_id) VALUES
  ('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000019'),
  ('00000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000020');

COMMIT;
